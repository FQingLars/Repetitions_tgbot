<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–ø–µ—Ç–∏—Ü–∏–π</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üé∏ RepRasp</h1>
            <p class="subtitle">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–ø–µ—Ç–∏—Ü–∏–π</p>
        </header>

        <nav class="tabs">
            <button class="tab-btn active" data-tab="schedule">
                <span class="tab-icon">üìÖ</span>
                <span class="tab-text">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
            </button>
            <button class="tab-btn" data-tab="functions">
                <span class="tab-icon">‚öôÔ∏è</span>
                <span class="tab-text">–§—É–Ω–∫—Ü–∏–∏</span>
            </button>
            <button class="tab-btn" data-tab="requests">
                <span class="tab-icon">üì®</span>
                <span class="tab-text">–ó–∞—è–≤–∫–∏</span>
            </button>
        </nav>

        <main class="content">
            <div id="schedule" class="tab-content active">
                <div class="section-header">
                    <h2>–ê–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
                    <button class="refresh-btn" onclick="loadSchedule()">
                        <span>üîÑ</span> –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                </div>

                <div id="schedule-loading" class="loading">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...</p>
                </div>

                <div id="schedule-list" class="schedule-list">
                </div>

                <div id="schedule-empty" class="empty-state hidden">
                    <div class="empty-icon">üì≠</div>
                    <p>–†–µ–ø–µ—Ç–∏—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
                    <button class="btn btn-primary" onclick="switchToFunctions()">
                        –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é —Ä–µ–ø–µ—Ç–∏—Ü–∏—é
                    </button>
                </div>
            </div>

            <div id="functions" class="tab-content">
                <div class="functions-grid">
                    <div class="function-card">
                        <div class="card-header">
                            <span class="card-icon">‚ûï</span>
                            <h3>–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–µ—Ç–∏—Ü–∏—é</h3>
                        </div>
                        <form id="add-form" class="function-form">
                            <div class="form-group">
                                <label for="add-group">–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</label>
                                <input
                                    type="text"
                                    id="add-group"
                                    placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Electroach"
                                    required
                                >
                            </div>
                            <div class="form-group">
                                <label for="add-datetime">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</label>
                                <input
                                    type="datetime-local"
                                    id="add-datetime"
                                    required
                                >
                            </div>
                            <button type="submit" class="btn btn-success btn-full">
                                <span>‚úÖ</span> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
                            </button>
                        </form>
                    </div>

                    <div class="function-card">
                        <div class="card-header">
                            <span class="card-icon">‚ûñ</span>
                            <h3>–£–¥–∞–ª–∏—Ç—å —Ä–µ–ø–µ—Ç–∏—Ü–∏—é</h3>
                        </div>
                        <form id="delete-form" class="function-form">
                            <div class="form-group">
                                <label for="delete-group">–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</label>
                                <input
                                    type="text"
                                    id="delete-group"
                                    placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã"
                                    required
                                >
                            </div>
                            <div class="form-group">
                                <label for="delete-datetime">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</label>
                                <input
                                    type="datetime-local"
                                    id="delete-datetime"
                                    required
                                >
                            </div>
                            <button type="submit" class="btn btn-danger btn-full">
                                <span>‚ùå</span> –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div id="requests" class="tab-content">
                <div class="section-header">
                    <h2>–ó–∞—è–≤–∫–∏ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</h2>
                    <button class="refresh-btn" onclick="loadRequests()">
                        <span>üîÑ</span> –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                </div>

                <div id="requests-loading" class="loading">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p>
                </div>

                <div id="requests-list" class="requests-list">
                </div>

                <div id="requests-empty" class="empty-state hidden">
                    <div class="empty-icon">‚úÖ</div>
                    <p>–í—Å–µ –∑–∞—è–≤–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã</p>
                    <p class="small-text">–ù–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç</p>
                </div>

                <div id="requests-admin-check" class="empty-state hidden">
                    <div class="empty-icon">üîí</div>
                    <p>–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤</p>
                    <p class="small-text">–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º</p>
                </div>
            </div>
        </main>

        <div id="toast" class="toast hidden">
            <span id="toast-message"></span>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>